///
/// @package @maddimathon/utility-sass@0.1.0-pre.5
/// @since 0.1.0-pre.0
///

@use '../../../config';
// @use '../../../tokens';

@use '../../../lib' as *;

@if config.$print_headings {
    /* # GLOBALS - Typography
     * ======================================================================== */
}

%selection {
    background-color: #{var-sys-colour(selection-bg)};
    color: #{var-sys-colour(selection-text)};
}

%root {
    @if config.$include_html {
        font-weight: 400;
        line-height: #{var-line-height('400')};
        background: #{var-sys-colour(background)};
        color: #{var-sys-colour(text)};
    }
}

%body {
    @if config.$include_html {
        font-size: #{var-fs(normal)};
    }
}

@if config.$print_headings {
    /* ## Typography - Inline ==================================== */
}

%strong {
    font-weight: 700;

    strong {
        font-weight: 800;

        strong {
            font-weight: 900;
        }
    }
}

%em {
    font-style: italic;

    em,
    i {
        font-style: normal;

        em,
        i {
            font-style: italic;
        }
    }
}

%a {
    --focus-ring-outline-color: currentColor;
    --focus-ring-outline-offset: #{var-stroke-relative('200')};
    display: inline;
    border: none;
    text-decoration: underline #{var-stroke-relative('200')};
    text-underline-offset: #{var-stroke-relative('800')};
    color: #{var-sys-colour(link)};

    /// STATES ///

    &:visited {
        color: #{var-sys-colour(link-visited)};
    }

    @include hover-focus-visible() {
        text-decoration-color: transparent;
        color: #{var-sys-colour(link-hover)};
    }

    &:active {
        color: #{var-sys-colour(link-active)};
    }

    /// EXCEPTIONS ///

    &.no-style {
        text-decoration: none;
        font-weight: inherit;
        color: inherit;
    }

    &[aria-disabled='true'] {
        text-decoration-line: line-through;
        color: var-sys-colour(text-disabled);
        opacity: 1;

        cursor: not-allowed;
    }
}

%abbr {
    &[title] {
        text-decoration: dotted underline #{var-stroke-relative('400')};
        cursor: help;
    }
}

@if config.$print_headings {
    /* ## Typography - Block ==================================== */
}

%p {
    margin-block: #{var-mrg-soft('400')} 0;

    hr + & {
        margin-block-start: 0;
    }
}

%blockquote {
    @include snippet-centre-callout-block($maxWidth: false);

    & {
        margin-block: #{var-mrg-soft('400')} 0;
        margin-block: #{var-mrg-soft('600')}
            calc(#{var-mrg-soft('600')} - #{var-mrg-soft('400')});

        padding-inline-start: #{var-mrg-firm('300')};

        border-inline-start: #{var-border-width('200')} solid currentColor;

        @include min-width(content) {
            margin-inline: #{var-gap-inline(tab)};
        }
    }

    > p {
        &:first-child {
            margin-block-start: 0;
        }
    }

    > cite {
        display: block;
        margin-block: #{var-mrg-soft('400')} 0;
        text-align: end;

        &::before {
            content: 'â€” ' / '';
            color: currentColor;
        }

        @include colour-mode((low, average)) {
            color: color-mix(in srgb, currentColor 75%, transparent);
        }

        @include high-contrast {
            color: color-mix(in srgb, currentColor 87.5%, transparent);
        }
    }
}

%code,
%kbd,
%pre,
%samp {
    position: relative;
}

%pre {
    @include snippet-centre-callout-block($maxWidth: false);

    & {
        position: relative;
        margin-inline: 0;
        margin-block: #{var-mrg-soft('400')} 0;
        margin-block: #{var-mrg-soft('600')}
            calc(#{var-mrg-soft('600')} - #{var-mrg-soft('400')});

        padding: #{var-mrg-soft('300')} #{var-mrg-firm('300')};

        border: #{var-border-width('100')} solid currentColor;

        max-width: min(120ch, 100%);

        overflow: auto;
        font-size: #{var-fs(smaller-1)};
    }

    > code {
        display: block;
        margin: 0;
        padding: 0;
        border: none;

        width: auto;
        max-width: 100%;

        white-space: normal;
        text-wrap: auto;
    }

    &:where(:has(> code)) {
        white-space: normal;
        text-wrap: auto;

        > %code {
            white-space: pre;
            text-wrap: nowrap;
            overflow: visible;
        }
    }
}

@if config.$print_headings {
    /* ## Typography - Headings ==================================== */
}

@each $num in token-all-heading-levels() {
    //
    #{if( $num == 1, ('%h#{$num}', '%title'), '%h#{$num}' )} {
        @include snippet-heading($num);

        %button {
            font: inherit;
            letter-spacing: inherit;
            text-transform: inherit;
        }

        &--where {
            @include snippet-heading($num);

            :where(%button) {
                font: inherit;
                letter-spacing: inherit;
                text-transform: inherit;
            }
        }
    }
}
