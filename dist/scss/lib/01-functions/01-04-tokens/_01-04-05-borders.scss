///
/// @package @maddimathon/utility-sass@0.1.0-alpha.19.draft
/// @since 0.1.0-pre.0
///

@use '../../../modules/map';
@use '../../../modules/math';

@use '../../../config';
@use '../../../tokens';

///
/// Uses the border width tokens to prepare the appropriate numerical value (rem).
///
/// @since 0.1.0-pre.0
/// @since 0.1.0-alpha.19.draft — Added $multiplier and $unit param.
///
@function border-width-value($level, $multiplier: 1, $unit: 1rem) {
    $value: map.get(tokens.$border_widths, '200');

    @if not map.has-key(tokens.$border_widths, '#{$level}') {
        @warn "$level '#{$level}' was not a key in tokens.$border_widths";
    } @else {
        $value: map.get(tokens.$border_widths, '#{$level}');
    }

    @return math.add-unit(
        if(
            $multiplier == 1,
            $value,
            math.round-to-pixel(
                $value * $multiplier,
                config.$fn_borderWidthValue_roundToPixelFactor
            )
        ),
        $unit
    );
}

///
/// Uses the border-width config tokens to print the appropriate var(...) with a
/// fallback.
///
/// @since 0.1.0-pre.0
///
@function var-border-width($level) {
    $fallback: border-width-value($level);

    @return if(
        config.$fn_var_replaceWithValue_borderWidth,
        $fallback,
        var(--#{config.$cxPropPre}border-width-#{$level}, $fallback)
    );
}

///
/// Uses the stroke relative tokens to prepare the appropriate numerical value (rem).
///
/// @since 0.1.0-pre.0
/// @since 0.1.0-alpha.19.draft — Added $multiplier and $unit param.
///
@function stroke-relative-value($level, $multiplier: 1, $unit: 1em) {
    $value: map.get(tokens.$strokes_relative, '200');

    @if not map.has-key(tokens.$strokes_relative, '#{$level}') {
        @warn "$level '#{$level}' was not a key in tokens.$strokes_relative";
    } @else {
        $value: map.get(tokens.$strokes_relative, '#{$level}');
    }

    @return math.add-unit(
        if(
            $multiplier == 1,
            $value,
            math.round-to-pixel(
                $value * $multiplier,
                config.$fn_borderWidthValue_roundToPixelFactor
            )
        ),
        $unit
    );
}

///
/// Uses the stroke-relative tokens to print the appropriate var(...) with a
/// fallback.
///
/// @since 0.1.0-pre.0
///
@function var-stroke-relative($level) {
    $fallback: stroke-relative-value($level);

    @return if(
        config.$fn_var_replaceWithValue_strokeRelative,
        $fallback,
        var(--#{config.$cxPropPre}stroke-relative-#{$level}, $fallback)
    );
}
