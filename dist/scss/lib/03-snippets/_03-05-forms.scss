///
/// @package @maddimathon/utility-sass@0.1.0-alpha.draft
/// @since 0.1.0-alpha.draft
///
@use 'sass:string';

@use '../01-functions' as *;
@use '../02-mixins' as *;

// @use '03-00-abstracts' as *;
// @use '03-01-accessibility' as *;
// @use '03-02-objects' as *;
// @use '03-03-typography' as *;
// @use '03-04-lists' as *;

/// # SNIPPETS - TYPOGRAPHY
/// ======================================================================== ///

///
/// Base styles for a button element.
///
/// @since 0.1.0-alpha.draft
///
@mixin snippet-button(
    $borderClr: ButtonBorder,
    $borderWidth: '100',
    $display: block,
    $lh: '100',
    $margin: #{var-mrg-firm('400')} 0 #{var-mrg-half('400')},
    $padding: #{var-mrg-soft('200')} #{var-mrg-firm('300')},
    $width: fit-content,

    $includeClrs: true
) {
    @include snippet-input(
        $borderClr: $borderClr,
        $borderWidth: $borderWidth,
        $display: $display,
        $lh: $lh,
        $margin: $margin,
        $padding: $padding,
        $width: $width,

        $includeClrs: false
    );

    & {
        appearance: button;
        text-decoration: none;
        cursor: pointer;

        @if $includeClrs {
            background-color: ButtonFace;
            color: ButtonText;
        }
    }

    /// STATES ///

    @include hover-focus-visible-or-within {
        @if $includeClrs {
            accent-color: ActiveText;
            background-color: SelectedItem;
            border-color: initial;
            color: SelectedItemText;
        }
        opacity: 0.875;

        @include colour-mode((high, forced-colors)) {
            opacity: 1;
        }
    }

    &:active {
        @if $includeClrs {
            accent-color: ActiveText;
            background-color: ButtonFace;
            border-color: ButtonBorder;
            color: ButtonText;
        }
    }
}

///
/// Base styles for an input element.
///
/// @since 0.1.0-alpha.draft
///
@mixin snippet-input(
    $borderClr: currentColor,
    $borderWidth: '100',
    $display: block,
    $lh: '200',
    $width: 100%,
    $margin: #{var-mrg-firm('400')} 0 #{var-mrg-half('400')},
    $padding: #{var-mrg-soft('200')} #{var-mrg-firm('200')},

    $includeClrs: true
) {
    display: #{$display};
    margin: #{$margin};
    padding: #{$padding};
    width: #{$width};

    font: inherit;
    line-height: #{var-line-height($lh)};

    border: #{var-border-width($borderWidth)} solid #{$borderClr};
    border-radius: 0;

    @if $includeClrs {
        // accent-color: SelectedItem;
        background-color: Field;
        color: FieldText;
    }

    /// STATES ///

    @if $includeClrs {
        @include hover-focus-visible-or-within((string.unquote('&:active'))) {
            accent-color: ActiveText;
        }
    }

    /// BLOCK ///

    &::placeholder {
        opacity: 1;

        color: currentColor;
        color: color-mix(in srgb, currentColor 62.5%, transparent);

        @include high-contrast {
            color: color-mix(in srgb, currentColor 87.5%, transparent);
        }

        @include forced-colors {
            color: currentColor;
        }
    }
}

///
/// Base styles for the types of an element. Uses the & as input.
///
/// @since 0.1.0-alpha.draft
///
@mixin snippet-input-types($includeBase: true) {
    @if $includeBase {
        @include snippet-input;
    }

    &[type='button'],
    &[type='checkbox'],
    &[type='color'],
    &[type='date'],
    &[type='datetime-local'],
    &[type='file'],
    &[type='month'],
    &[type='radio'],
    &[type='range'],
    &[type='reset'],
    &[type='submit'],
    &[type='time'],
    &[type='week'] {
        cursor: pointer;
    }

    &[type='email'],
    &[type='month'],
    &[type='number'],
    &[type='password'],
    &[type='search'],
    &[type='tel'],
    &[type='text'],
    &[type='url'],
    &[type='week'] {
        cursor: text;
    }

    &[type='checkbox'],
    &[type='radio'] {
        display: inline-block;
        padding: 0;
        width: auto;

        accent-color: SelectedItem;

        @include hover-focus-visible-or-within((string.unquote('&:active'))) {
            accent-color: ActiveText;
        }
    }

    &[type='color'] {
        padding: 0;
        height: 2.25em;
        width: 2.25em;
    }

    &[type='date'],
    &[type='datetime-local'],
    &[type='file'],
    &[type='month'],
    &[type='time'],
    &[type='week'] {
        width: auto;
    }

    &[type='file'] {
        padding-inline: #{var-mrg-firm('300')};
        font-size: #{var-fs(smaller-1)};
    }

    &[type='range'] {
        padding: 0;
    }
}

///
/// Base styles for a form label, including check and radio boxes.
///
/// @since 0.1.0-alpha.draft
///
@mixin snippet-label(
    $gap: var-mrg-soft('300'),
    $lh_checkradio: var-line-height('400'),
    $lh: var-line-height('200'),
    $marginBlock_innercheckradio: var-mrg-firm('200'),
    $marginBlock: var-mrg-firm('400')
) {
    display: block;
    margin: #{$marginBlock} 0 0;
    font-weight: 600;
    line-height: #{$lh};

    &:has(> input[type='checkbox'], > input[type='radio']) {
        display: grid;
        grid-template-columns: fit-content(0) 1fr;
        justify-content: end;
        align-items: baseline;
        gap: #{$gap};

        font-weight: 400;
        line-height: #{$lh_checkradio};
        text-wrap: balance;

        cursor: pointer;

        & + & {
            margin-block-start: #{$marginBlock_innercheckradio};
        }

        + %_input-base {
            margin-block-start: #{$marginBlock};
        }
    }

    > input[type='checkbox'],
    > input[type='radio'] {
        margin-block: 0;
    }
}
