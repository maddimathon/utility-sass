///
/// @package @maddimathon/utility-sass@0.1.0-alpha.29
/// @since 0.1.0-pre.0
///

@use '../../config';

@use '../../modules/math';
@use '../../modules/meta';

@use '../01-functions' as *;
@use '../02-mixins' as *;

/// # SNIPPETS - TYPOGRAPHY
/// ======================================================================== ///

// default vars
$_headingDefault_fontStyle: normal;
$_headingDefault_fontWeight: 600;
$_headingDefault_letterSpacing: normal;
$_headingDefault_lineHeight: var-line-height('400');
$_headingDefault_marginBlockEnd: var-mrg-half('400');
$_headingDefault_marginBlockStart: var-mrg-soft('600');
$_headingDefault_size: var-fs(normal);
$_headingDefault_textTransform: none;

///
/// Adds properties to reverse heading styles when a heading element is used for
/// a11y and not display.
///
/// @since 0.1.0-alpha.6 — Added optional $includeUnstyledHeadingProps prop.
///
@mixin snippet-unstyled-heading($fontStyle: 'italic') {
    margin-block: #{$_headingDefault_marginBlockStart}
        #{$_headingDefault_marginBlockEnd};

    font-weight: #{$_headingDefault_fontWeight};
    font-size: #{$_headingDefault_size};
    line-height: #{$_headingDefault_lineHeight};
    letter-spacing: #{$_headingDefault_letterSpacing};

    text-transform: #{$_headingDefault_textTransform};

    font-style: #{$_headingDefault_fontStyle};

    @if $fontStyle == italic {
        font-style: normal;

        em {
            font-style: italic;

            em {
                font-style: normal;

                em {
                    font-style: italic;
                }
            }
        }
    }
}

///
/// Adds basic properties for the given heading level.
///
/// @since 0.1.0-pre.0
/// @since 0.1.0-alpha.6 — Added optional $includeUnstyledHeadingProps prop.
///
@mixin snippet-heading($slug: '7', $includeUnstyledHeadingProps: true) {
    $slugAsNumber: if(meta.type-of($slug) == 'number', $slug, null);
    $slug: #{$slug};
    $heading9orAbove: false;

    // setting default prop values
    $fontWeight: $_headingDefault_fontWeight;
    $fontStyle: $_headingDefault_fontStyle;
    $letterSpacing: $_headingDefault_letterSpacing;
    $lineHeight: $_headingDefault_lineHeight;
    $marginBlockStart: $_headingDefault_marginBlockStart;
    $marginBlockEnd: $_headingDefault_marginBlockEnd;
    $size: $_headingDefault_size;
    $textTransform: $_headingDefault_textTransform;

    @if $slug == title {
        //
        $slug: '1';
        $slugAsNumber: 1;
        //
    } @else if $slug {
        //
        $slugAsNumber: if(
            $slugAsNumber == null,
            math.num-val($slug),
            $slugAsNumber
        );

        @if $slugAsNumber > 8 {
            $heading9orAbove: true;
            $size: var-fs(heading-#{$slug}, $fallback: var-fs(heading-8));
        } @else {
            $size: var-fs(heading-#{$slug});
        }
    }

    @if $slug == '1' {
        $fontWeight: 900;
        $lineHeight: var-line-height('200');
        $marginBlockStart: #{var-mrg-soft('800')};
    }

    @if $slug == '2' {
        $fontWeight: 800;
        $lineHeight: var-line-height('200');
        $marginBlockStart: #{var-mrg-soft('800')};
    }

    @if $slug == '3' {
        $fontWeight: 700;
        $lineHeight: var-line-height('200');
        $marginBlockStart: #{var-mrg-soft('800')};
    }

    @if $slug == '4' {
        $fontWeight: 700;
        $fontStyle: italic;
        $lineHeight: var-line-height('300');
    }

    @if $slug == '5' {
        $fontWeight: 600;
        $fontStyle: italic;
        $lineHeight: var-line-height('300');
    }

    @if $slug == '6' {
        $fontWeight: 500;
        $fontStyle: italic;
        $lineHeight: var-line-height('300');
    }

    @if $slug == '7' or $slug == '8' or $heading9orAbove {
        $fontWeight: 500;
        $fontStyle: normal;
        $lineHeight: var-line-height('400');

        $letterSpacing: 0.0625em;
        $textTransform: uppercase;
    }

    @if $slug == '8' or $heading9orAbove {
        $fontStyle: italic;
    }

    @if $heading9orAbove {
        $marginBlockStart: var-mrg-soft('500');
        $lineHeight: var-line-height('500');
    }

    margin-block: #{$marginBlockStart} #{$marginBlockEnd};

    font-weight: #{$fontWeight};
    font-size: #{$size};
    line-height: #{$lineHeight};
    letter-spacing: #{$letterSpacing};

    text-transform: #{$textTransform};
    text-wrap: balance;

    font-style: #{$fontStyle};

    @if $fontStyle == italic {
        em {
            font-style: normal;

            em {
                font-style: italic;
            }
        }
    }

    @if $includeUnstyledHeadingProps {
        &:where(%unstyled-heading) {
            @include snippet-unstyled-heading($fontStyle: $fontStyle);
        }
    }
}

///
/// @since 0.1.0-pre.0
///
@mixin snippet-centre-callout-block($maxWidth: true) {
    display: block;
    margin-inline: auto;
    width: auto;

    @if config.$include_html {
        margin-inline: #{var-gap-inline(indent)};

        @if $maxWidth {
            @include min-width(indent) {
                margin-inline: auto;

                @if meta.type-of($maxWidth) == number {
                    max-width: min(#{var-width(callout)}, #{$maxWidth});
                } @else {
                    max-width: min(#{var-width(callout)}, 100%);
                }
            }
        }
    }
}
