///
/// @package @maddimathon/utility-sass@0.1.0-alpha.32
/// @since 0.1.0-pre.0
///

// @use '../../../config';

@use '../../../modules/meta';
@use '../../../modules/selector';

@use '../../01-functions' as *;

/// # UTILITY MIXINS - Accessibility
/// ======================================================================== ///

/// ## MOTION ==================================== ///

///
/// Nests the content in both a media query and selectors (if appropriate).
///
/// @param {bool} $bool         Whether the selectors for select to include motion (true; `prefers-reduced-motion: no-preference`) or not (falsee; `prefers-reduced-motion: less`).
/// @param {bool} $nestParent   Optional. Whether to nest the parent selector inside the motion selector. Default true.
/// @param {bool} $unifyParent  Optional. Whether to unify the parent selector with the motion selector. Default false.
///
/// @since 0.1.0-pre.0
///
@mixin _any-motion(
    $bool,
    $nestParent: null,
    $unifyParent: null,

    $includeQuery: true,
    $includeSelectors: true,

    $parentSelectorExists: selector.parent-exists(),
    $args...
) {
    $args: meta.keywords($args);

    @if $includeQuery {
        @media ( prefers-reduced-motion: #{if( $bool, 'no-preference', 'reduce' )} ) {
            @if $parentSelectorExists {
                @content;
            } @else {
                @at-root #{selector.parent-or-root()} {
                    @content;
                }
            }
        }
    }

    @if $includeSelectors {
        @at-root #{selector-motion( 
            $bool: $bool, 
            $nestParent: $nestParent,
            $unifyParent: $unifyParent, 
            $args... 
        )} {
            @content;
        }
    }
}

///
/// Nests the content in both a media query and selectors (if appropriate).
///
/// @param {bool} $nestParent   Optional. Whether to nest the parent selector inside the motion selector. Default true.
/// @param {bool} $unifyParent  Optional. Whether to unify the parent selector with the motion selector. Default false.
///
/// @since 0.1.0-pre.0
///
@mixin motion($args...) {
    $args: meta.keywords($args);

    @include _any-motion(true, $args...) {
        @content;
    }
}

///
/// Nests the content in both a media query and selectors (if appropriate).
///
/// @param {bool} $nestParent   Optional. Whether to nest the parent selector inside the motion selector. Default true.
/// @param {bool} $unifyParent  Optional. Whether to unify the parent selector with the motion selector. Default false.
///
/// @since 0.1.0-pre.0
///
@mixin no-motion($args...) {
    $args: meta.keywords($args);

    @include _any-motion(false, $args...) {
        @content;
    }
}
