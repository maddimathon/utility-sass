///
/// @package @maddimathon/utility-sass@0.1.0-alpha.11
/// @since 0.1.0-pre.0
///

@use '../../../config';
@use '../../../tokens';

@use '../../../modules/map';
@use '../../../modules/meta';
@use '../../../modules/selector';
@use '../../../modules/string';

@use '../../01-functions' as *;

// @use '../02-01-utilities' as *;
@use '../02-02-theming' as *;

// @use '02-03-01-utilities' as *;

/// # PROPERTY MIXINS - Tokens
/// ======================================================================== ///

///
/// Prints out the border width custom property tokens based on config.
///
/// @since 0.1.0-pre.0
///
@mixin tokens-border-width {
    /* #region Tokens - Border Width */
    #{selector.parent-or-root()} {
        @each $slug, $_value in tokens.$border_widths {
            --border-width-#{$slug}: #{border-width-value($slug)};
        }
    }
    /* #endregion Tokens - Border Width */
}

///
/// Prints out the relative strokes custom property tokens based on config.
///
/// @since 0.1.0-pre.0
///
@mixin tokens-stroke-relative {
    /* #region Tokens - Stroke Relative */
    #{selector.parent-or-root()} {
        @each $slug, $_value in tokens.$strokes_relative {
            --stroke-relative-#{$slug}: #{stroke-relative-value($slug)};
        }
    }
    /* #endregion Tokens - Stroke Relative */
}

///
/// Prints out the font size custom property tokens based on config.
///
/// @since 0.1.0-pre.0
///
@mixin tokens-font-size {
    /* #region Tokens - Font Size */
    #{selector.parent-or-root()} {
        @each $slug, $_value in tokens.$font_sizes {
            @each $value in fs-value($slug) {
                --fs-#{$slug}: #{$value};
            }
        }
    }
    /* #endregion Tokens - Font Size */
}

///
/// Prints out the line height custom property tokens based on config.
///
/// @since 0.1.0-pre.0
///
@mixin tokens-line-height {
    /* #region Tokens - Line Heights */
    #{selector.parent-or-root()} {
        @each $slug, $_value in tokens.$line_heights {
            --line-height-#{$slug}: #{line-height-value($slug)};
        }
    }
    /* #endregion Tokens - Line Heights */
}

///
/// Prints out the margin custom property tokens based on config.
///
/// @since 0.1.0-pre.0
///
@mixin tokens-margin {
    $selector: selector.parent-or-root();

    /* #region Tokens - Margin */
    #{$selector} {
        @each $level, $_value in tokens.$margins {
            --mrg-firm-#{$level}: #{mrg-value-firm($level)}rem;
        }
    }

    #{$selector} {
        @each $level, $_value in tokens.$margins {
            --mrg-soft-#{$level}: #{mrg-value-soft($level)}rem;
        }
    }

    #{$selector} {
        @each $level, $_value in tokens.$margins {
            --mrg-half-#{$level}: #{mrg-value-half($level)}rem;
        }
    }
    /* #endregion Tokens - Margin */
}

///
/// Prints out the border width custom property tokens based on config.
///
/// @since 0.1.0-pre.0
///
@mixin tokens-gap {
    /* #region Tokens - Gap */
    #{selector.parent-or-root()} {
        //
        @each $dir, $dirMap in tokens.$gaps {
            //
            @each $slug, $_list in $dirMap {
                //
                @each $value in gap-value($dir, $slug) {
                    --gap-#{$dir}-#{$slug}: #{$value};
                }
            }
        }
    }
    /* #endregion Tokens - Gap */
}

///
/// Prints out the width custom property tokens based on breakpoints config.
///
/// @since 0.1.0-pre.0
///
@mixin tokens-width {
    /* #region Tokens - Width */
    #{selector.parent-or-root()} {
        @each $slug, $_value in config.$widths {
            @each $value in width-value($slug, $returnAsNumber: false) {
                --width-#{$slug}: #{$value};
            }
        }
    }
    /* #endregion Tokens - Width */
}

$_systemColors: get-sys-colours();

///
/// Prints out the line height custom property default values based on config.
///
/// @since 0.1.0-pre.0
///
@mixin tokens-sys-colour($clrOverrides: (), $includeForcedColours: true) {
    $map: map.merge($_systemColors, $clrOverrides);

    /* #region Tokens - System Colours */
    :where(#{selector.parent-or-root()}) {
        @each $slug, $list in $map {
            $i: 1;

            @each $value in $list {
                @if $i > 1 {
                    @supports (color: #{$value}) {
                        --sys-clr-#{$slug}: #{$value};
                    }
                } @else {
                    --sys-clr-#{$slug}: #{$value};
                }

                $i: $i + 1;
            }
        }
    }

    @if $includeForcedColours {
        @include forced-colors {
            @each $slug, $list in $map {
                //
                // changes $list
                @if string.index($slug, button-bg) == 1 {
                    $list: map.get($map, button-bg);
                } @else if string.index($slug, button-border) == 1 {
                    $list: map.get($map, button-border);
                } @else if string.index($slug, button-text) == 1 {
                    $list: map.get($map, button-text);
                }

                @each $value in $list {
                    --sys-clr-#{$slug}: #{$value} !important;
                }
            }
        }
    }
    /* #endregion Tokens - System Colours */
}
