///
/// @package @maddimathon/utility-sass@0.1.0-alpha.32.draft
/// @since 0.1.0-pre.0
///

@use '../../../config';
@use '../../../tokens';

@use '../../../modules/list';
@use '../../../modules/map';
@use '../../../modules/meta';
@use '../../../modules/selector';
@use '../../../modules/string';

@use '../../01-functions' as *;

@use '../02-01-utilities' as *;
@use '../02-02-theming' as *;

// @use '02-03-01-utilities' as *;

/// # PROPERTY MIXINS - Tokens
/// ======================================================================== ///

///
/// Prints out the border width custom property tokens based on config.
///
/// @since 0.1.0-pre.0
/// @since 0.1.0-alpha.19 — Added $multiplier param.
///
@mixin tokens-border-width($multiplier: 1) {
    /* #region Tokens - Border Width */
    #{selector.parent-or-root()} {
        @each $slug, $_value in tokens.$border_widths {
            @include cx-prop(
                border-width-#{$slug},
                border-width-value($slug, $multiplier: $multiplier)
            );
        }
    }
    /* #endregion Tokens - Border Width */
}

///
/// Prints out the relative strokes custom property tokens based on config.
///
/// @since 0.1.0-pre.0
/// @since 0.1.0-alpha.19 — Added $multiplier param.
///
@mixin tokens-stroke-relative($multiplier: 1) {
    /* #region Tokens - Stroke Relative */
    #{selector.parent-or-root()} {
        @each $slug, $_value in tokens.$strokes_relative {
            @include cx-prop(
                stroke-relative-#{$slug},
                stroke-relative-value($slug, $multiplier: $multiplier)
            );
        }
    }
    /* #endregion Tokens - Stroke Relative */
}

///
/// Prints out the font size custom property tokens based on config.
///
/// @since 0.1.0-pre.0
/// @since 0.1.0-alpha.19 — Added $multiplier param.
///
@mixin tokens-font-size($multiplier: 1) {
    /* #region Tokens - Font Size */
    #{selector.parent-or-root()} {
        @each $slug, $_value in tokens.$font_sizes {
            @each $value in fs-value($slug, $multiplier: $multiplier) {
                @include cx-prop(fs-#{$slug}, $value);
            }
        }

        @if config.$mx_tokensFontSize_printRelative {
            @each $slug, $_value in tokens.$font_sizes {
                @each $value
                    in fs-value(
                        $slug,
                        $multiplier: $multiplier,
                        $relative: true
                    )
                {
                    @include cx-prop(fs-rel-#{$slug}, $value);
                }
            }
        }
    }
    /* #endregion Tokens - Font Size */
}

///
/// Prints out the line height custom property tokens based on config.
///
/// @since 0.1.0-pre.0
/// @since 0.1.0-alpha.19 — Added $multiplier param.
///
@mixin tokens-line-height($multiplier: 1) {
    /* #region Tokens - Line Heights */
    #{selector.parent-or-root()} {
        @each $slug, $_value in tokens.$line_heights {
            @include cx-prop(
                line-height-#{$slug},
                line-height-value($slug, $multiplier: $multiplier)
            );
        }
    }
    /* #endregion Tokens - Line Heights */
}

///
/// Prints out the margin custom property tokens based on config.
///
/// @since 0.1.0-pre.0
/// @since 0.1.0-alpha.19 — Added $multiplier param.
///
@mixin tokens-margin($multiplier: 1) {
    $selector: selector.parent-or-root();

    /* #region Tokens - Margin */
    #{$selector} {
        @each $level, $_value in tokens.$margins {
            @include cx-prop(
                mrg-firm-#{$level},
                mrg-value-firm($level, $unit: 1rem, $multiplier: $multiplier)
            );
        }
        @each $level, $_value in tokens.$margins {
            @include cx-prop(
                pad-firm-#{$level},
                mrg-value-firm($level, $unit: 1em, $multiplier: $multiplier)
            );
        }
    }

    #{$selector} {
        @each $level, $_value in tokens.$margins {
            @include cx-prop(
                mrg-soft-#{$level},
                mrg-value-soft($level, $unit: 1rem, $multiplier: $multiplier)
            );
        }
        @each $level, $_value in tokens.$margins {
            @include cx-prop(
                pad-soft-#{$level},
                mrg-value-soft($level, $unit: 1em, $multiplier: $multiplier)
            );
        }
    }

    #{$selector} {
        @each $level, $_value in tokens.$margins {
            @include cx-prop(
                mrg-half-#{$level},
                mrg-value-half($level, $unit: 1rem, $multiplier: $multiplier)
            );
        }
        @each $level, $_value in tokens.$margins {
            @include cx-prop(
                pad-half-#{$level},
                mrg-value-half($level, $unit: 1em, $multiplier: $multiplier)
            );
        }
    }
    /* #endregion Tokens - Margin */
}

///
/// Prints out the border width custom property tokens based on config.
///
/// @since 0.1.0-pre.0
/// @since 0.1.0-alpha.19 — Added $multiplier param.
///
@mixin tokens-gap($multiplier: 1) {
    /* #region Tokens - Gap */
    #{selector.parent-or-root()} {
        //
        @each $dir, $dirMap in tokens.$gaps {
            //
            @each $slug, $_list in $dirMap {
                //
                @each $value in gap-value($dir, $slug, $multiplier: $multiplier)
                {
                    @include cx-prop(gap-#{$dir}-#{$slug}, $value);
                }
            }
        }
    }
    /* #endregion Tokens - Gap */
}

///
/// Prints out the width custom property tokens based on breakpoints config.
///
/// @since 0.1.0-pre.0
/// @since 0.1.0-alpha.19 — Added $multiplier param.
///
@mixin tokens-width($multiplier: 1) {
    /* #region Tokens - Width */
    #{selector.parent-or-root()} {
        @each $slug, $_value in config.$widths {
            @each $value
                in width-value(
                    $slug,
                    $multiplier: $multiplier,
                    $returnAsNumber: false
                )
            {
                @include cx-prop(width-#{$slug}, $value);
            }
        }
    }
    /* #endregion Tokens - Width */
}

$_systemColors: get-sys-colours();

///
/// Prints out the line height custom property default values based on config.
///
/// @since 0.1.0-pre.0
///
@mixin tokens-sys-colour($clrOverrides: (), $includeForcedColours: true) {
    $map: map.parse-args($_systemColors, $clrOverrides);

    /* #region Tokens - System Colours */
    :where(#{selector.parent-or-root()}) {
        @each $slug, $list in $map {
            $i: 1;

            @each $value in list.unique($list) {
                @if $i > 1 {
                    @supports (color: #{$value}) {
                        @include cx-prop(sys-clr-#{$slug}, $value);
                    }
                } @else {
                    @include cx-prop(sys-clr-#{$slug}, $value);
                }

                $i: $i + 1;
            }
        }
    }

    @if $includeForcedColours {
        @include forced-colors {
            @each $slug, $list in $map {
                //
                // changes $list
                @if string.index($slug, button-bg) == 1 {
                    $list: map.get($map, button-bg);
                } @else if string.index($slug, button-border) == 1 {
                    $list: map.get($map, button-border);
                } @else if string.index($slug, button-text) == 1 {
                    $list: map.get($map, button-text);
                }

                @each $value in $list {
                    @include cx-prop(sys-clr-#{$slug}, #{$value} !important);
                }
            }
        }
    }
    /* #endregion Tokens - System Colours */
}
