///
/// @package @maddimathon/utility-sass@0.1.0-alpha.27
/// @since 0.1.0-pre.0
///
@use 'sass:list';
@use 'sass:meta';
@use 'sass:string';

@use 'string' as *;

///
/// Selector used as a 'null' (e.g., not-output) selector within the system to
/// avoid errors.  e.g., with the mode mixins if the targeted mode is disabled.
///
/// @default ( string.unquote('%null') )
///
/// @since 0.1.0-pre.0
///
$selector_null: (string.unquote('%null')) !default;

///
/// Validates the value of a config variable that should be a selector.
///
/// If value is null, the default is returned without warning.
///
/// @param {any}     $value  The variable's value.
/// @param {string}  $name   The variable's name.
///
/// @param {selector} $default  Default value to return if $value is invalid.
///
/// @returns {selector}  A selector.
///
@function config-valid-selector($value, $name, $default) {
    // returns - value is to be default
    @if $value == null {
        @return $default;
    }

    // returns - if empty or value is not a selector
    @if meta.type-of($value) == 'string' {
        // returns - empty
        @if string.length($value) < 1 {
            @warn "[config] $#{$name} must be a valid selector (not an empty string)";
            @return $default;
        }

        $value: (string.unquote('#{$value}'));

        // returns - value is not a selector
    } @else if meta.type-of($value) != 'list' {
        @warn "[config] $#{$name} must be a selector (not the #{meta.type-of( $value )} '#{$value}')";
        @return $default;
    }

    // returns - empty
    @if list.length($value) < 1 {
        @warn "[config] $#{$name} must be a valid selector (not an empty list)";
        @return $default;
    }

    // $parsedSelector: selector.parse(#{$value});

    // // returns - empty
    // @if list.length($parsedSelector) < 1 {
    //     @warn "[config] $#{$name} must be a valid selector (not empty)";
    //     @return $default;
    // }

    @return $value;
}

$_selectorTypes: ('attribute', 'class', 'null');

///
/// Validates the value of a config variable that should be a selector type (
///
/// @param {any}     $value    The variable's value.
/// @param {string}  $name     The variable's name.
/// @param {?string} $default  Default value to return if $value is invalid.
///
@function config-valid-selector-type($value, $name, $default: 'null') {
    // returns - value is to be default
    @if $value == null {
        @return $default;
    }

    @return config-valid-string(
        $value,
        $name,
        $default,
        $options: $_selectorTypes
    );
}
