///
/// @package @maddimathon/utility-sass@0.1.0-alpha.draft
/// @since 0.1.0-alpha.draft
///
// @use 'sass:color';
@use 'sass:list';
@use 'sass:map';
// @use 'sass:math';
// @use 'sass:meta';
// @use 'sass:selector';
// @use 'sass:string';

@use '../../config';
@use '../../tokens';

// @use '../01-01-meta' as *;
// @use '../01-02-lists' as *;
// @use '../01-03-maps' as *;
@use '../01-04-numbers' as *;
// @use '../01-05-strings' as *;
// @use '../01-06-selectors' as *;
// @use '../01-07-colours' as *;
// @use '../01-08-accessibility' as *;
@use '../01-09-typography' as *;

// @use '01-11-01-spacing' as *;
// @use '01-11-02-theming' as *;
// @use '01-11-03-colours' as *;

/// # TYPOGRAPHY TOKEN FUNCTIONS
/// ======================================================================== ///

///
/// Uses the widths config to prepare the appropriate numerical value (rem).
/// Returns a list of values since some are calculations that may require
/// fallbacks.
///
/// @return {number}
///
/// @since 0.1.0-alpha.draft
///
@function fs-value($slug, $fontScale: 1, $clampFontSize: null) {
    // returns
    @if not map.has-key(tokens.$font_sizes, $slug) {
        @warn "$slug did not match any of the font family tokens";
        @return ();
    }

    $size: map.get(tokens.$font_sizes, $slug);

    @if $clampFontSize == null {
        $clampFontSize: false;

        // returns - clamped value
        @if $slug == 'title' {
            $clampFontSize: true;
        }
        @if $slug == 'h1' {
            $clampFontSize: true;
        }
        @if $slug == 'h2' {
            $clampFontSize: true;
        }
        @if $slug == 'h3' {
            $clampFontSize: true;
        }
        @if $slug == 'h4' {
            $clampFontSize: true;
        }
        @if $slug == 'h5' {
            $clampFontSize: true;
        }
        @if $slug == 'h6' {
            $clampFontSize: true;
        }
        @if $slug == 'heading-1' {
            $clampFontSize: true;
        }
        @if $slug == 'heading-2' {
            $clampFontSize: true;
        }
        @if $slug == 'heading-3' {
            $clampFontSize: true;
        }
        @if $slug == 'heading-4' {
            $clampFontSize: true;
        }
        @if $slug == 'heading-5' {
            $clampFontSize: true;
        }
        @if $slug == 'heading-6' {
            $clampFontSize: true;
        }
        @if $slug == 'bigger-7' {
            $clampFontSize: true;
        }
        @if $slug == 'bigger-8' {
            $clampFontSize: true;
        }
        @if $slug == 'bigger-9' {
            $clampFontSize: true;
        }
    }

    @if $clampFontSize {
        @return (
            #{round-to-pixel($size * $fontScale)}rem,
            clamp-font-size($size * $fontScale, $unit: 'rem')
        );
    }

    @return (#{round-to-pixel($size * $fontScale)}rem);
}

///
/// Uses the widths config to prepare the appropriate numerical value (rem).
/// Returns a list of values since some are calculations that may require
/// fallbacks.
///
/// @return {number}
///
/// @since 0.1.0-alpha.draft
///
@function line-height-value($level) {
    $value: map.get(tokens.$line_heights, '400');

    @if not map.has-key(tokens.$line_heights, '#{$level}') {
        @warn "$level was not a key in tokens.$line_heights";
    } @else {
        $value: map.get(tokens.$line_heights, '#{$level}');
    }

    @return $value;
}

///
/// Uses the line height config tokens to print the appropriate var(...) with a
/// fallback.
///
/// @since 0.1.0-alpha.draft
///
@function var-line-height($slug) {
    @return var(--line-height-#{$slug}, #{line-height-value($slug)});
}

/// ## VARIABLES ==================================== ///

///
/// Uses the font size config tokens to print the appropriate var(...) with a
/// fallback.
///
/// @since 0.1.0-alpha.draft
///
@function var-fs($slug) {
    $fallback: fs-value($slug);

    @if list.length($fallback) < 1 {
        @return var(--fs-#{$slug});
    }

    $fallback: list.nth($fallback, 1);

    @return var(--fs-#{$slug}, #{$fallback});
}
