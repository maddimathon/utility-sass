///
/// @package @maddimathon/utility-sass@___CURRENT_VERSION___
/// @since ___PKG_VERSION___
///

// @use '../../../config';
@use '../../../tokens';

@use '../../../modules/map';

// @use '../01-02-accessibility' as *;
// @use '../01-03-typography' as *;

// @use '01-04-01-spacing' as *;
// @use '01-11-02-theming' as *;
// @use '01-11-03-colours' as *;
// @use '01-04-04-typography' as *;

/// # CUSTOM TOKEN FUNCTIONS
/// ======================================================================== ///

$_flattened_customTokens: map.flatten(tokens.$customTokens);

///
/// Gets the value of a custom token.
///
/// @param {string} $slug  Flattened key for the token to fetch.
///
/// @since ___PKG_VERSION___
///
@function token-value($slug) {
    // returns
    @if not map.has-key($_flattened_customTokens, '#{$slug}') {
        @warn "$slug '#{$slug}' was not a key in the flattened tokens.$customTokens";
        @return $slug;
    }

    @return map.get($_flattened_customTokens, '#{$slug}');
}

///
/// Returns the flattened custom tokens map.
///
/// @since ___PKG_VERSION___
///
@function token-map() {
    @return $_flattened_customTokens;
}

///
/// Uses the custom tokens to print the appropriate var(...) with a fallback.
///
/// @param {string} $slug  Flattened key for the token to fetch.
///
/// @since ___PKG_VERSION___
///
@function var-token($slug) {
    $fallback: token-value($slug);

    // returns
    @if #{$fallback} == #{$slug} {
        @return var(--#{$slug});
    }

    @return var(--#{$slug}, #{$fallback});
}
