/// 
/// @package @maddimathon/utility-sass@___CURRENT_VERSION___
/// @since ___PKG_VERSION___
/// 
// @use 'sass:color';
@use 'sass:list';
@use 'sass:map';
@use 'sass:math';
@use 'sass:meta';
// @use 'sass:selector';
@use 'sass:string';

// @use '../config';

// @use '01-01-meta' as *;
// @use '01-02-lists' as *;
// @use '01-03-maps' as *;



/// # NUMBER FUNCTIONS
/// ======================================================================== ///


/// 
/// Removes a numberâ€™s unit if one exists.
/// @param {number} $num  
/// @return {number}  
/// 
@function deunit( $num ) {

    // returns
    @if meta.type-of( $num ) == 'number' and not math.is-unitless( $num ) {
        @return math.div( $num, ( $num * 0 + 1 ) );
    }

    @return $num;
}


/// 
/// Get the number value of a string of a number.
/// https://stackoverflow.com/a/47633235
/// 
/// @param {number|string} $string  
/// @return {number}
/// 
@function num-val( $string ) {

    // returns
    @if meta.type-of( $string ) == 'number' {

        @return $string;

    } @else if meta.type-of( $string ) != 'string' {

        @warn '[num-val] value (#{$string}) is a #{meta.type-of( $string )} but should be a number or string.';
        @return $string;
    }
      
    $result: 0;
    $digits: 0;
    $minus: string.slice( $string, 1, 1 ) == '-';
    $digitsList: ( 
        '0': 0, 
        '1': 1, 
        '2': 2, 
        '3': 3, 
        '4': 4, 
        '5': 5, 
        '6': 6, 
        '7': 7, 
        '8': 8, 
        '9': 9 
    );
    
    @for $i from if( $minus, 2, 1 ) through string.length($string) {

        $character: string.slice( $string, $i, $i );
        
        @if list.index( map.keys( $digitsList ), $character ) or $character == '.' {

            $charDigit: map.get( $digitsList, $character );

            @if $character == '.' {
                $digits: 1; 
            } @else if $digits == 0 {
                $result: $result * 10 + $charDigit;  
            } @else {
                $digits: $digits * 10;
                $result: calc( $result + $charDigit / $digits );
            }
        }
    }

    @return if( $minus, -$result, $result );
}


/// 
/// Tries to get slightly nicer outputed numbers for calculated em and rem values.
/// @param {number} $num  
/// @return {number}
/// 
@function round-to-pixel( $num ) {

    // returns
    @if meta.type-of( $num ) != number {
        @warn "$num should be a number but it was a: #{meta.typeof( $num )}";
        @return $num;
    }
    
    @return calc( math.round( $num * 16 ) / 16 );
}